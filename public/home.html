<script src="markerclusterer.js"></script>
<style>
    .demo-card-wide.mdl-card {
      width: 100%;
      margin-bottom: 10px;
  }
  .demo-card-wide > .mdl-card__title {
      color: #fff;
      height: 176px;
      background: url('../assets/demos/welcome_card.jpg') center / cover;
  }
  .demo-card-wide > .mdl-card__menu {
      color: #fff;
  }
  .cause:first-of-type {
      padding-top: 15px;
  }

</style>

<div ng-controller="HomepageController" class="container">

    <h2>Pairing funded solutions directly to local causes</h2>

    <div id="todo-list" class="row" >
        <div class="col-md-6" style= "overflow-y: scroll; max-height: 420px">


            <div ng-repeat="cause in causes" class="cause">
                <a class="no-deco" href="#/view-cause/{{cause._id}}">
                    <div class="demo-card-wide mdl-card mdl-shadow--2dp">
                        <div class="mdl-card__title">
                            <h2 class="mdl-card__title-text">{{ cause.title }}</h2>
                            
                        </div>
                        <div class="mdl-card__supporting-text">
                            {{ cause.description }}
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <div style="float:left;width:45%;"><a href="#/view-cause/{{cause._id}}" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                More information
                            </a> </div> 
                            <div style="float:right;width:45%;"><p class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" disabled>Raised so far: Â£{{cause.currentFundsTotal}}</p></div>
                        
                        </div>
                        
                        
                        
                    </div>
            </div>
        </div>
        <div class="col-md-6" style="height: 400px;">
            <div id="map"></div>
        </div>
    </div>
</div>
</div>

<script>
    function initMap() {
        var causes = angular.element($("ng-view .ng-scope")).scope().causes;
        var locations = [];
        for (var i = 0; i <= causes.length; i++) {
            if (causes[i] && causes[i].latitude) {
                locations.push({ lat: causes[i].latitude, lng: causes[i].longitude });
            }
        }
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 3,
            center: {lat: 37.10672, lng: 41.15185}
        });

    // Create an array of alphabetical characters used to label the markers.
    var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

    var markers = locations.map(function(location, i) {
        return new google.maps.Marker({
            position: location,
            label: labels[i % labels.length]
        });
    });

    // Add a marker clusterer to manage the markers.
    var markerCluster = new MarkerClusterer(map, markers, { imagePath: 'https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m' });

}


var locations = [

{lat: -37.750000, lng: 145.116667},
{lat: -37.759859, lng: 145.128708},
{lat: -37.765015, lng: 145.133858},
{lat: -37.770104, lng: 145.143299},
{lat: -37.773700, lng: 145.145187},
{lat: -37.774785, lng: 145.137978},
{lat: -37.819616, lng: 144.968119},
{lat: -38.330766, lng: 144.695692},
{lat: -39.927193, lng: 175.053218},
{lat: -41.330162, lng: 174.865694},
{lat: -42.734358, lng: 147.439506},
{lat: -42.734358, lng: 147.501315},
{lat: -42.735258, lng: 147.438000},
{lat: -43.999792, lng: 170.463352}
]
</script>


<script async defer
src="https://maps.googleapis.com/maps/api/js?callback=initMap"></script>
